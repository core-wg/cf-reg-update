



Constrained RESTful Environments                              T. Fossati
Internet-Draft                                                    Linaro
Updates: 7252 (if approved)                                      E. Dijk
Intended status: Standards Track                       IoTconsultancy.nl
Expires: 3 August 2025                                   30 January 2025


    Update to the IANA CoAP Content-Formats Registration Procedures
                  draft-ietf-core-cf-reg-update-latest

Abstract

   This document updates RFC7252 regarding the registration procedures
   for the "CoAP Content-Formats" registry, within the "CoRE Parameters"
   registry group.  The affected registration procedures are
   specifically those regarding the IETF Review or IESG Approval portion
   of the registry as well as those regarding the First Come First
   Served (FCFS) portion of the registry.

About This Document

   This note is to be removed before publishing as an RFC.

   The latest revision of this draft can be found at https://core-
   wg.github.io/cf-reg-update/draft-ietf-core-cf-reg-update.html.
   Status information for this document may be found at
   https://datatracker.ietf.org/doc/draft-ietf-core-cf-reg-update/.

   Discussion of this document takes place on the Constrained RESTful
   Environments Working Group mailing list (mailto:core@ietf.org), which
   is archived at https://mailarchive.ietf.org/arch/browse/core/.
   Subscribe at https://www.ietf.org/mailman/listinfo/core/.

   Source for this draft and an issue tracker can be found at
   https://github.com/core-wg/cf-reg-update.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 3 August 2025.

Copyright Notice

   Copyright (c) 2025 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.

Table of Contents

   1.  Introduction
   2.  Conventions and Definitions
   3.  Examples for Erroneous Registrations
     3.1.  The Media Type is Unknown
     3.2.  The Media Type Parameter is Unknown
     3.3.  The Media Type Parameter Value is Invalid
     3.4.  The Content Coding is Unknown
     3.5.  Duplicate Entry with Default Media Type Parameters
     3.6.  Duplicate Entry with Default Content Coding
   4.  Security Considerations
   5.  IANA Considerations
     5.1.  Expert Review Checks
     5.2.  Temporary Note Removal
   6.  References
     6.1.  Normative References
     6.2.  Informative References
   Acknowledgments
   Authors' Addresses

1.  Introduction

   Section 12.3 of [RFC7252] describes the registration procedures for
   the "CoAP Content-Formats" registry within the "CoRE Parameters"
   registry group [IANA.core-parameters].  (Note that the columns of
   this registry have been revised according to [Err4954].)

   In particular, the text defines the rules for obtaining CoAP Content-
   Format identifiers from the IETF Review or IESG Approval portion of
   the registry (256-9999) as well as from the First Come First Served
   (FCFS) portion of the registry (10000-64999).  These rules do not
   involve the Designated Expert (DE) and are managed solely by IANA
   personnel to finalize the registration.

   Unfortunately, the instructions do not explicitly require checking
   that the combination of content-type (i.e., media type with optional
   parameters) and content coding associated with the requested CoAP
   Content-Format is semantically valid.  This task is generally non-
   trivial, requiring knowledge from multiple documents and
   technologies, which is not a task to demand solely from the
   registrar.  This lack of guidance may engender confusion in both the
   registering party and the registrar, and has already led to erroneous
   registrations.

   In Section 5, this document updates [RFC7252] by modifying the
   registration procedures for the "CoAP Content-Formats" registry
   regarding its IETF Review or IESG Approval portion as well as its
   FCFS portion, to mitigate the risk of unintentional or malicious
   errors.

2.  Conventions and Definitions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   [BCP14] (RFC2119) (RFC8174) when, and only when, they appear in all
   capitals, as shown here.

   This document uses the terms "media type", "content coding",
   "content-type" and "content format" as defined in Section 2 of
   [RFC9193].

3.  Examples for Erroneous Registrations

   This section contains a few examples of registration requests for a
   CoAP Content-Format with identifier 64999 in the FCFS space that must
   not be allowed to succeed.

   The following considerations also apply to alternative examples
   where, for the same combination of content type and content coding, a
   registration was requested for a CoAP Content-Format with identifier
   in the IETF Review or IESG Approval space.  That is, such
   registrations must not be allowed to succeed.

3.1.  The Media Type is Unknown

   The registrant requests an FCFS Content-Format ID for an unknown
   media type:

   +==========================+================+=======+
   | Content Type             | Content Coding | ID    |
   +==========================+================+=======+
   | application/unknown+cbor | -              | 64999 |
   +--------------------------+----------------+-------+

       Table 1: Attempt at Registering Content-Format
                 for an Unknown Media Type

3.2.  The Media Type Parameter is Unknown

   The registrant requests an FCFS Content-Format ID for an existing
   media type with an unknown parameter:

   +=======================================+================+=======+
   | Content Type                          | Content Coding | ID    |
   +=======================================+================+=======+
   | application/cose; unknown-parameter=1 | -              | 64999 |
   +---------------------------------------+----------------+-------+

     Table 2: Attempt at Registering Content-Format for Media Type
                         with Unknown Parameter

3.3.  The Media Type Parameter Value is Invalid

   The registrant requests an FCFS Content-Format ID for an existing
   media type with an invalid parameter value:

   +=====================================+================+=======+
   | Content Type                        | Content Coding | ID    |
   +=====================================+================+=======+
   | application/cose; cose-type=invalid | -              | 64999 |
   +-------------------------------------+----------------+-------+

       Table 3: Attempt at Registering Content-Format for Media
                  Type with Invalid Parameter Value

3.4.  The Content Coding is Unknown

   The registrant requests an FCFS Content-Format ID for an existing
   media type with an unknown content coding:

   +========================+================+=======+
   | Content Type           | Content Coding | ID    |
   +========================+================+=======+
   | application/senml+cbor | inflate        | 64999 |
   +------------------------+----------------+-------+

      Table 4: Attempt at Registering Content-Format
               with Unknown Content Coding

3.5.  Duplicate Entry with Default Media Type Parameters

   The registrant requests an FCFS Content-Format ID for a media type
   that includes a parameter set to its default value, while a
   (hypothetical) Content-Format ID 64900 is already registered for this
   media type without that parameter.  As a result, this could lead to
   the creation of two separate Content-Format IDs for the same
   "logical" entry.

   +===================================+================+=======+
   | Content Type                      | Content Coding | ID    |
   +===================================+================+=======+
   | application/my                    | -              | 64900 |
   +-----------------------------------+----------------+-------+
   | application/my; parameter=default | -              | 64999 |
   +-----------------------------------+----------------+-------+

       Table 5: Attempt at Registering an Equivalent Logical
            Entry with a Different Content-Format ID (1)

3.6.  Duplicate Entry with Default Content Coding

   The registrant requests an FCFS Content-Format ID for the "identity"
   Content Coding, which is the default coding.  If accepted, this
   request would duplicate an entry with (hypothetical) Content-Format
   ID 64900 where the "Content Coding" field is left empty.

   +================+================+=======+
   | Content Type   | Content Coding | ID    |
   +================+================+=======+
   | application/my | -              | 64900 |
   +----------------+----------------+-------+
   | application/my | identity       | 64999 |
   +----------------+----------------+-------+

        Table 6: Attempt at Registering an
         Equivalent Logical Entry with a
         Different Content-Format ID (2)

4.  Security Considerations

   This document hardens the registration procedures of CoAP Content-
   Formats in ways that reduce the chances of malicious manipulation of
   the associated registry.

   Other than that, it does not change the Security Considerations of
   [RFC7252].

5.  IANA Considerations


   // RFC Editor: in this section, please replace RFCthis with the RFC
   // number assigned to this document and remove this note.

   The CoAP Content-Formats registration procedures defined in
   Section 12.3 of [RFC7252] are modified as shown in Table 7.

   +========================+================+=========================+
   | Range                  | Registration   | Note                    |
   |                        | Procedures     |                         |
   +========================+================+=========================+
   | 0-255                  | Expert Review  | Review checks described |
   |                        |                | in RFCthis, Section 5.1 |
   +------------------------+----------------+-------------------------+
   | 256-9999               | IETF Review    | Review checks described |
   |                        | with Expert    | in RFCthis, Section 5.1 |
   |                        | Review or IESG |                         |
   |                        | Approval with  |                         |
   |                        | Expert Review  |                         |
   +------------------------+----------------+-------------------------+
   | 10000-64999 (No        | First Come     | The corresponding media |
   | parameters and empty   | First Served   | type must be registered |
   | Content Coding and     |                | (or approved for        |
   | media type not yet     |                | publication) in the     |
   | used in this           |                | "Media Types" registry  |
   | registry)              |                | [IANA.media-types]      |
   +------------------------+----------------+-------------------------+
   | 10000-64999            | Expert Review  | Review checks described |
   | (Includes parameters   |                | in RFCthis, Section 5.1 |
   | and/or Content         |                |                         |
   | Coding and/or media    |                |                         |
   | type appears in this   |                |                         |
   | registry)              |                |                         |
   +------------------------+----------------+-------------------------+
   | 65000-65535            | Experimental   |                         |
   |                        | use (no        |                         |
   |                        | operational    |                         |
   |                        | use)           |                         |
   +------------------------+----------------+-------------------------+

       Table 7: Updated CoAP Content-Formats Registration Procedures

   The 256-9999 range now has registration procedures requiring IETF
   Review with Expert Review or IESG Approval with Expert Review.  In
   particular:

   *  All assignments according to "IETF Review with Expert Review" are
      made on an "IETF Review" basis per Section 4.8 of [BCP26] with
      "Expert Review" additionally required per Section 4.5 of [BCP26].

      The procedure for early IANA allocation of "standards track code
      points" defined in [RFC7120] also applies.  When such a procedure
      is used, IANA will ask the Designated Expert(s) to approve the
      early allocation before registration.  In addition, working group
      chairs are encouraged to consult the Expert(s) early during the
      process outlined in Section 3.1 of [RFC7120].

   *  All assignments according to "IESG Approval with Expert Review"
      are made on an "IESG Approval" basis per Section 4.10 of [BCP26]
      with "Expert Review" additionally required per Section 4.5 of
      [BCP26].

   The 10000-64999 range now has two separate registration procedures.
   If the registration consists solely of a registered media type name
   in the "Content Type" field, without any parameter names or "Content
   Coding", and the media type has not yet been used in this registry,
   then the policy is FCFS, as before.  In all other cases, the policy
   will be Expert Review, following the checklist described in
   Section 5.1.

   A new column with the title "Note" has been added to the registry,
   which contains information about expected checks.

5.1.  Expert Review Checks

   The Designated Expert is instructed to perform the Expert Review, as
   described by the following checklist:

   1.  The combination of content-type and content coding for which the
       registration is requested must not be already present in the
       "CoAP Content-Formats" registry;

   2.  The media type associated with the requested Content-Format must
       exist (or must have been approved for registration) in the "Media
       Types" registry [IANA.media-types];

   3.  The optional parameter names must have been defined in
       association with the media type, and any parameter values
       associated with such parameter names must be as permitted;

   4.  If a Content Coding is specified, it must exist (or must have
       been approved for registration) in the "HTTP Content Coding"
       registry of the "Hypertext Transfer Protocol (HTTP) Parameters"
       [IANA.http-parameters].

   For the 0-255 range, in addition to the checks described above, the
   DE is instructed to also evaluate the requested codepoint concerning
   the limited availability of the 1-byte codepoint space.  For the
   256-9999 range and the 10000-64999 range, this criterion does not
   apply.

5.2.  Temporary Note Removal

   This section is to be removed before publishing as an RFC.

   The following note has been added to the registry as a temporary fix:

      "Note: The validity of the combination of Content Coding, Content
      Type and parameters is checked prior to assignment."

   IANA is instructed to remove this note from the registry when this
   document is approved for publication.  RFC-Editor: please remove this
   section once the note has been removed.

6.  References

6.1.  Normative References

   [BCP14]    Best Current Practice 14,
              <https://www.rfc-editor.org/info/bcp14>.
              At the time of writing, this BCP comprises the following:

              Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

              Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [BCP26]    Cotton, M., Leiba, B., and T. Narten, "Guidelines for
              Writing an IANA Considerations Section in RFCs", BCP 26,
              RFC 8126, DOI 10.17487/RFC8126, June 2017,
              <https://www.rfc-editor.org/rfc/rfc8126>.

   [RFC7120]  Cotton, M., "Early IANA Allocation of Standards Track Code
              Points", BCP 100, RFC 7120, DOI 10.17487/RFC7120, January
              2014, <https://www.rfc-editor.org/rfc/rfc7120>.

   [RFC7252]  Shelby, Z., Hartke, K., and C. Bormann, "The Constrained
              Application Protocol (CoAP)", RFC 7252,
              DOI 10.17487/RFC7252, June 2014,
              <https://www.rfc-editor.org/rfc/rfc7252>.

6.2.  Informative References

   [Err4954]  RFC Errata Report 4954, RFC 7252,
              <https://www.rfc-editor.org/errata/eid4954>.

   [IANA.core-parameters]
              IANA, "Constrained RESTful Environments (CoRE)
              Parameters",
              <https://www.iana.org/assignments/core-parameters>.

   [IANA.http-parameters]
              IANA, "Hypertext Transfer Protocol (HTTP) Parameters",
              <https://www.iana.org/assignments/http-parameters>.

   [IANA.media-types]
              IANA, "Media Types",
              <https://www.iana.org/assignments/media-types>.

   [RFC9193]  Ker√§nen, A. and C. Bormann, "Sensor Measurement Lists
              (SenML) Fields for Indicating Data Value Content-Format",
              RFC 9193, DOI 10.17487/RFC9193, June 2022,
              <https://www.rfc-editor.org/rfc/rfc9193>.

Acknowledgments

   Thank you Amanda Baber, Carsten Bormann, Francesca Palombini, and
   Marco Tiloca for your reviews, comments, suggestions and fixes.

Authors' Addresses

   Thomas Fossati
   Linaro
   Email: thomas.fossati@linaro.org


   Esko Dijk
   IoTconsultancy.nl
   Email: esko.dijk@iotconsultancy.nl
